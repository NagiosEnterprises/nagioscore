name: Nagios Core Tests

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]

jobs:
  build_and_test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - name: Install other dependencies
      run: |
        sudo apt update
        sudo apt install libgd-dev valgrind gcovr lcov gperf
    - name: configure
    # https://www.gnu.org/software//automake/manual/html_node/maintainer_002dmode.html
      run: ./configure --enable-libtap --enable-maintainer-mode
    - name: make test
      run: make test
